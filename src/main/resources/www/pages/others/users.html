<div class="users">
    <div class="button is-success m-2" onclick="startCreateProcess()">+ %T%CREATE_USER%T%</div>

    <div class="columns is-gapless">
        <div class="column">
            <div>%T%ICON%T%</div>
        </div>
        <div class="column">
            <div>%T%NAME%T%</div>
        </div>
        <div class="column">
            <div>%T%GROUPS%T%</div>

        </div>
        <div class="column">
            <div>%T%ACTIONS%T%</div>
        </div>
    </div>
    <div class="dataParent" data-callback="return getCurrentData();" data-interval=3000>
        <div class="dataArray" data-path="users" data-arrayid="users"></div>
        <div class="dataArrayTemplate IGNORE" data-arrayid="users">
            <div class="w-100 userEntry">
                <div class="columns is-gapless">
                    <div class="column">
                        <div>
                            <img class="dataFieldIMG" data-path="pictureURL">
                        </div>
                    </div>
                    <div class="column">
                        <div class="dataField has-text-info" data-path="name"></div>
                    </div>
                    <div class="column">
                        <div>
                            <div class="dataArray childrenWidthContent childrenInline childrenMargin" data-path="roles" data-arrayid="userroles"></div>
                            <div class="dataArrayTemplate IGNORE" data-arrayid="userroles">
                                <div>
                                    <div class="tag is-primary dataField dataFieldAttrib" data-attrib="style" data-attribpath="." data-attribprocessor="return 'background-color: ' + GROUP_DATA[scope].html_color + ';';" data-processor="return GROUP_DATA[scope].name;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="actions">
                            <button class="button widthContent is-link showWithPerm dataFieldAttrib" data-attrib="onclick" data-attribpath="name" data-attribprocessor="return 'startEdit(\'' + scope + '\');';" data-permission="USERS_EDIT">
                                <span class="material-icons-outlined">
                                    edit
                                </span>
                            </button>

                            <button class="button widthContent is-danger showWithPerm dataFieldAttrib" data-attrib="onclick" data-attribpath="name" data-attribprocessor="return 'deleteUser(\'' + scope + '\');';" data-permission="USERS_EDIT">
                                <span class="material-icons-outlined">
                                    delete
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="userEditDialogue userEditDialogueTemplate IGNORE hidden">
    <div class="dataParent onlyUpdateOnce" data-callback="return (await getCurrentData()).byName('%USERNAME%');" data-interval=1000>
        <div class="section p-1">
            <div class="title">%T%APPEARANCE%T%</div>
            <div class="field">
                <label class="label">%T%NAME%T%</label>
                <div class="control">
                    <input class="input dataFieldAttrib onlyUpdateOnce" type="text" data-attrib="value" data-attribpath="name">
                </div>
            </div>
            <div class="field">
                <label class="label">%T%PASSWORD%T%</label>
                <div class="control">
                    <input class="input dataFieldAttrib onlyUpdateOnce" type="text" data-attrib="value" data-attribpath="passwordStarred">
                </div>
            </div>
        </div>

        <div class="section p-1">
            <div class="title">%T%PERMISSIONS%T%</div>

            <div class="field groupsField">
                <label class="label">%T%GROUPS%T%</label>
                <div class="dataArray onlyUpdateOnce" data-path="roles" data-arrayid="groupsEditHas"></div>
                <div class="dataArrayTemplate IGNORE" data-arrayid="groupsEditHas">
                    <label class="checkbox">
                            <input type="checkbox" class="dataFieldAttrib" data-attribpath="." data-attrib="data-checkpath" checked>
                            <div class="dataField inline" data-path="." data-processor="return GROUP_DATA[scope].name;"></div>
                    </label>
                </div>

                <div class="dataArray onlyUpdateOnce" data-path="nothasroles" data-arrayid="groupsEditNotHas"></div>
                <div class="dataArrayTemplate IGNORE" data-arrayid="groupsEditNotHas">
                    <label class="checkbox">
                            <input type="checkbox" class="dataFieldAttrib" data-attribpath="." data-attrib="data-checkpath" >
                            <div class="dataField inline" data-path="." data-processor="return GROUP_DATA[scope].name;"></div>
                    </label>
                </div>
            </div>

            <div class="field">
                <label class="label">%T%PERMISSIONS%T%</label>
                <div class="loadFromTemplate" data-url="pages/others/permissionList.html"></div>
            </div>
        </div>

        <div class="section p-1">
            <div class="button is-success saveButton">
                <span class="material-icons-outlined">save</span> %T%SAVE_CHANGES%T%
            </div>
        </div>

    </div>
</div>